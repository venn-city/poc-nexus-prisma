"use strict";
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
var nexus_1 = require("nexus");
var builder_1 = require("./builder");
var validate_1 = require("./validate");
__export(require("./definitions"));
function makePrismaSchema(options) {
    validate_1.validateOptions(options);
    var builder = new builder_1.PrismaSchemaBuilder(options);
    if (!options.types) {
        options.types = [];
    }
    var schema = nexus_1.core.makeSchemaInternal(options, builder).schema;
    // Only in development envs do we want to worry about regenerating the
    // schema definition and/or generated types.
    var _a = options.shouldGenerateArtifacts, shouldGenerateArtifacts = _a === void 0 ? Boolean(!process.env.NODE_ENV || process.env.NODE_ENV === 'development') : _a;
    if (shouldGenerateArtifacts) {
        // Generating in the next tick allows us to use the schema
        // in the optional thunk for the typegen config
        new nexus_1.core.TypegenMetadata(options).generateArtifacts(schema).catch(function (e) {
            console.error(e);
        });
    }
    return schema;
}
exports.makePrismaSchema = makePrismaSchema;
//# sourceMappingURL=index.js.map