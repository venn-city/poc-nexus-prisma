"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var path_1 = tslib_1.__importDefault(require("path"));
function typegenFormatPrettier(prettierConfig) {
    return function formatTypegen(content, type) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var prettier, fs, util, readFile, _a, _b, e_1;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 3, , 4]);
                        prettier = require("prettier");
                        if (!(typeof prettierConfig === "string")) return [3 /*break*/, 2];
                        if (!path_1.default.isAbsolute(prettierConfig)) {
                            throw new Error("Expected prettierrc path to be absolute, saw " + prettierConfig);
                        }
                        fs = require("fs");
                        util = require("util");
                        readFile = util.promisify(fs.readFile);
                        _b = (_a = JSON).parse;
                        return [4 /*yield*/, readFile(prettierConfig, "utf8")];
                    case 1:
                        prettierConfig = _b.apply(_a, [_c.sent()]);
                        _c.label = 2;
                    case 2: return [2 /*return*/, prettier.format(content, tslib_1.__assign({}, prettierConfig, { parser: type === "types" ? "typescript" : "graphql" }))];
                    case 3:
                        e_1 = _c.sent();
                        console.error(e_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/, content];
                }
            });
        });
    };
}
exports.typegenFormatPrettier = typegenFormatPrettier;
//# sourceMappingURL=typegenFormatPrettier.js.map